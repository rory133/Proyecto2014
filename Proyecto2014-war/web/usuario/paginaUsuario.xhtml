<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">




 <f:view locale="#{localeBean.locale}">
     
    <h:head>

            
            <f:loadBundle basename="resources.mensajes.mensajes" var="msg"/>
            <f:facet name="Principal">
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
            </f:facet>
            <title><h:outputText value="#{msg.app_title_inicio}"/> </title>
            <h:outputStylesheet library="css" name="default.css"  />
            <h:outputStylesheet library="css" name="cssLayout.css"  />

            <link rel="shortcut icon" type="image/x-icon" href="#{resource['images/favicon.ico']}"/>


    </h:head>
     
    <h:body style="background-color: #7092be" >
        <p:layout fullPage="true" rendered="#{ROLE_SOCIO}">
             <p:growl id="msgs" showDetail="true" escape="false" autoUpdate="true"/>
                <p:layoutUnit position="north" size="100" resizable="true" closable="true" collapsible="true" id="filtroSuperior">

                    <div class="fondo-norte" id="menuSuperior">
                  
                    <div class="texto-norte">
                        <h:form>  
                         <h:outputText value="#{msg['app.Socio']}: #{sessionScope.login.login}  " /> 
                         <h:outputText value="#{msg['app.VotosNegativos']}: #{sessionScope.usuario.votosNegativos}  " />         

                         <p:commandLink id="salir"  actionListener="#{loginBean.logout()}">
                                <h:outputText value="#{msg['app.Salir']}" />
                                 <p:tooltip id="toolTipFade00" for="salir" value="#{msg['app.toolTipSalirComoUsuario']}" />
                            </p:commandLink>


                        </h:form>
                    </div>
                     <h:form id="formSuperior" >   
                        <h:form id="tablaTodos" rendered="#{not listadoProductos.soloMios}">
                        <table border="0" width="100%" >
                         <tr>
                           <td>
                          
                            <h:panelGrid id="panelGridFiltro" columns="2" style="margin-bottom:10px" cellpadding="5">
                                <p:selectOneRadio id="filtro" value="#{listadoProductos.filtro}">
                                    <f:selectItem itemLabel="#{msg['app.itemTodos']}" itemValue="todos"  />
                                    <f:selectItem itemLabel="#{msg['app.itemVentaDirecta']}" itemValue="ventaDirecta" />
                                    <f:selectItem itemLabel="#{msg['app.itemSubasta']}" itemValue="subasta" />
                                    <f:ajax event="valueChange"  render=":formListadoProducto"/>

                                </p:selectOneRadio>
                                 <p:tooltip id="toolTipFade11" for="panelGridFiltro" value="#{msg['app.tooltipFiltrarProductos']}" />
                            </h:panelGrid>

                          </td> 
                          <td class='alnright'>
                                                           
                              <p:inputText id="nombre" value="#{listadoProductos.nombreBuscado}" label="busqueda">
                                    <p:tooltip id="toolTipFade1" for="nombre" value="#{msg['app.tooltipBuscarPorNombre']}" />
                              </p:inputText>
                           

                          </td> 
                          <td class='alnleft' >
                           
                              <p:commandLink id="buscaXNombre"  action="#{listadoProductos.buscaXNombre()}">

                                    <f:ajax event="click" render=":formListadoProducto:productos" />
                                    <h:graphicImage library="images" name="buscar2.gif" />
                                    <p:tooltip id="toolTipFade2" for="buscaXNombre" value="#{msg['app.tooltipBotonBuscarPorNombre']}" />
                                </p:commandLink>
                              <!--</h:form>-->
                          </td>
                            <td>             


                               <h:panelGrid id="aGestionarMisProductos" columns="2" style="margin-bottom:10px" cellpadding="5">
                                  <h:outputText value="#{msg['app.GestionarMisProductos']}:" id="botonSoloMios1"/>
                                  <p:selectBooleanCheckbox value="#{listadoProductos.soloMios}">
                                      <f:ajax event="change"  render=":formSuperior :formListadoProducto @all"/>
                                   
                                    <p:tooltip id="toolTipFadeSoloMios1" for="aGestionarMisProductos" value="#{msg['app.GestionarTusProductos']}" />
                                  </p:selectBooleanCheckbox>
                              </h:panelGrid>

                            </td>
                         </tr>
                     
                        </table>
                         </h:form>
                         <h:form  id="tablaSoloMios" rendered="#{listadoProductos.soloMios}">
                         <table border="0" width="100%">
                             <tr>
                               <td>
                                
                                <h:panelGrid id="panelGridFiltro2" columns="2" style="margin-bottom:10px" cellpadding="5"
                                             rendered="#{gestionVentas.filtroMisProductos eq 'ofertados'}">
                                      
                                    <p:selectOneRadio id="filtro2" value="#{listadoProductos.filtro}">
                                        <f:selectItem itemLabel="#{msg['app.itemTodos']}" itemValue="todos"  />
                                        <f:selectItem itemLabel="#{msg['app.itemVentaDirecta']}" itemValue="ventaDirecta" />
                                        <f:selectItem itemLabel="#{msg['app.itemSubasta']}" itemValue="subasta" />
                                        <f:ajax event="change"  render=":formListadoProducto"/>

                                    </p:selectOneRadio>
                                     <p:tooltip id="toolTipFadeTipoVenta" for="panelGridFiltro2" value="#{msg['app.tooltipFiltrarProductos']}" />
                                </h:panelGrid>
  
                              </td> 
                              <td>
                                    <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5" id="filtraMisProductos">

                                        <p:selectOneRadio id="filtroMisProductos" value="#{gestionVentas.filtroMisProductos}">
                                                    <f:selectItem itemLabel="#{msg['app.Ofertados']}" itemValue="ofertados" />
                                                    <f:selectItem itemLabel="#{msg['app.Comprados']}" itemValue="comprados" />
                                                    <f:selectItem itemLabel="#{msg['app.Vendidos']}" itemValue="vendidos" />
                                                    <f:ajax event="change"  render="@all :formFiltroComprados :formFiltroVendidos :formListadoProducto :formListadoVentas "/>
                                                
                                         </p:selectOneRadio>
                                     <p:tooltip id="toolTipFadeFiltro" for="filtroMisProductos" value="#{msg['app.toolTipFiltraTusProductos']}" />                           
                                 </h:panelGrid>
                              </td>
                                <td>


                                <h:link outcome="crearProducto" id="crearNuevo" >
                                        <h:graphicImage library="images" name="nuevo.gif" />
                                        <p:tooltip id="toolTipFade02" for="crearNuevo" value="#{msg['app.toolTipCrearUnNuevoProducto']}" />
                                </h:link>

                                </td>

                                <td>             

                                  
                                   <h:panelGrid id="gestionarMisProductos" columns="2" style="margin-bottom:10px" cellpadding="5">
                                      <h:outputText value="#{msg['app.GestionarMisProductos']}:" id="botonSoloMios2"/>
                                      <p:selectBooleanCheckbox value="#{listadoProductos.soloMios}">
                                          <f:ajax event="change"  render=":formSuperior :formListadoProducto :izquierda @all"/>
                                      
                                        <p:tooltip id="toolTipFadeSoloMios2" for="gestionarMisProductos" value="#{msg['app.SalirDeGestionarTusProductos']}" />
                                      </p:selectBooleanCheckbox>
                                  </h:panelGrid>

                                </td>
                             </tr>
                     
                        </table>                            
                       </h:form>
                      </h:form>




                    </div>   
                </p:layoutUnit>
            

      


                <p:layoutUnit id="izquierda" position="west" size="25%" header="#{listadoProductos.titulo}" collapsible="false" 
                              style="background-color: #e1c1a2" >
                  
                <h:form id="formCategorias" style="background-color: #e1c1a2" 
                        rendered="#{gestionVentas.filtroMisProductos eq 'ofertados' or not listadoProductos.soloMios }">
                          

                        <p:tree value="#{treeSelectionView.root1}" var="doc"
                                selectionMode="single"
                                selection="#{treeSelectionView.selectedNode}"
                                style="background-color: #e1c1a2">
                            <p:treeNode expandedIcon="ui-icon-folder-open" collapsedIcon="ui-icon-folder-collapsed">
                                <h:outputText value="#{doc.nombre}"/>
                            </p:treeNode>
                            <p:treeNode type="document" icon="ui-icon-document">
                                <h:outputText value="#{doc.nombre}" />
                            </p:treeNode>
                            <p:treeNode type="picture" icon="ui-icon-image">
                                <h:outputText value="#{doc.nombre}" />
                            </p:treeNode>
                            <p:treeNode type="mp3" icon="ui-icon-video">
                                <h:outputText value="#{doc.nombre}" />
                            </p:treeNode>

                        </p:tree>

                        <p:commandButton value="#{msg['app.BotonInformaciónCategoría']}" update=":msgs" icon="ui-icon-newwin"
                                         actionListener="#{treeSelectionView.displaySelectedSingle}"/>



                        <p:commandButton id="boton2" value="#{msg['app.BotonFiltrarCategoria']}"  update=":msgs"  
                                         action="#{listadoProductos.buscaXCategoria()}" icon="ui-icon-check" >
                                         <f:ajax event="click" render=":formListadoProducto:productos" />

                        </p:commandButton>





                        <p:separator />




                </h:form>
             
                       
                <h:form id="formFiltroComprados" rendered="#{gestionVentas.filtroMisProductos eq 'comprados' and  listadoProductos.soloMios}" 
                        style="background-color: #e1c1a2" >
                    <p:growl id="grow2"  /> 
                        <p:separator /><p:separator /><p:separator /><p:separator />
                        <p:separator /><p:separator /><p:separator /><p:separator />
                        <p:separator /><p:separator /><p:separator /><p:separator />
                        <p:separator /><p:separator /><p:separator /><p:separator />
                        <p:commandLink id="botonRecibidos"  update="grow2" actionListener="#{gestionVentas.misProductosCompradosRecibidos()}">
                         <f:ajax event="click" render=":formListadoProducto :formListadoVentas" />
                          <f:ajax execute="formFiltroComprados" render=":formListadoProducto :formListadoVentas "></f:ajax>
                        <h:outputText value="#{msg['app.Recibidos']}" />
                    </p:commandLink>
                        <p:separator />
                    <p:commandLink id="botonNoRecibidos" update="grow2"  actionListener="#{gestionVentas.misProductosCompradosNORecibidos()}" >
                        <f:ajax event="click" render=":formListadoProducto :formListadoVentas :formListadoVentas:listadoVentas" />
                         <f:ajax execute="formFiltroComprados" render=":formListadoProducto :formListadoVentas"></f:ajax>
                        <h:outputText value="#{msg['app.NoRecibidos']}" />

                    </p:commandLink>
                        <p:separator /><p:separator /><p:separator /><p:separator />
                        <p:separator /><p:separator /><p:separator /><p:separator />
                        <p:separator /><p:separator /><p:separator /><p:separator />
                        <p:separator /><p:separator /><p:separator /><p:separator />
                </h:form>    
                  <h:form id="formFiltroVendidos" rendered="#{gestionVentas.filtroMisProductos eq 'vendidos' and  listadoProductos.soloMios}" 
                          style="background-color: #e1c1a2; color: #e1c1a2">
                  <p:growl id="grow3"  /> 
                        <p:separator /><p:separator /><p:separator /><p:separator />
                        <p:separator /><p:separator /><p:separator /><p:separator />
                        <p:separator /><p:separator /><p:separator /><p:separator />
                        <p:separator /><p:separator /><p:separator /><p:separator />
                        <p:commandLink id="botonEnviados"  update="grow3" actionListener="#{gestionVentas.misProductosVendidosEnviados()}">
                         <f:ajax event="click" render=":formListadoProducto :formListadoVentas" />
                          <f:ajax execute="formFiltroVendidos" render=":formListadoProducto :formListadoVentas "></f:ajax>
                        <h:outputText value="#{msg['app.Enviados']}" />
                       </p:commandLink>
                           <p:separator />
                           <p:commandLink id="botonNoEnviados" update="grow3" actionListener="#{gestionVentas.misProductosVendidosNoEnviados()}" >
                        <f:ajax event="click" render=":formListadoProducto :formListadoVentas :formListadoVentas:listadoVentas" />
                         <f:ajax execute="formFiltroVendidos" render=":formListadoProducto :formListadoVentas"></f:ajax>
                        <h:outputText value="#{msg['app.NoEnviados']}" />
                         <p:separator /><p:separator /><p:separator /><p:separator />
                        <p:separator /><p:separator /><p:separator /><p:separator />
                        <p:separator /><p:separator /><p:separator /><p:separator />
                        <p:separator /><p:separator /><p:separator /><p:separator />

                    </p:commandLink>
                </h:form>                    
         
                    
                    
                    
                    
            </p:layoutUnit>
             

             
             <p:layoutUnit position="center" style="background-color: #c8bfe7" id="listaProductos"  
                           rendered = "#{gestionVentas.filtroMisProductos eq 'ofertados' or not listadoProductos.soloMios }" >
                <ui:include src="listadoProductosUsuario.xhtml" />
                
                
                
            </p:layoutUnit>  
             
            <p:layoutUnit position="center" style="background-color: #c8bfe7" id="listaVentas" 
                          rendered = "#{listadoProductos.soloMios and ( gestionVentas.filtroMisProductos eq 'comprados' or gestionVentas.filtroMisProductos eq 'vendidos')}">
               <ui:include src="listadoVentas.xhtml" />
                
            </p:layoutUnit>
             

                
                
   
        </p:layout>
            <h:outputText value="#{msg['app.NoEstasRegistradoComoSocioParaPoderAccederAEstaPagina']}"    rendered="#{ROLE_ADMIN}" />
            <BR/>
             <h:link outcome="/admin/index" value="#{msg['app.Volver']}"   rendered="#{ROLE_ADMIN}" />
            <h:outputText value="#{msg['app.NoEstasLogadoParaPoderAccederAEstaPagina']}"    rendered="#{!ROLE_SOCIO and !ROLE_ADMIN}" />
            
            
            <BR/>
            <h:link outcome="/faces/paginaAnonimo" value="#{msg['app.Volver']}" rendered="#{!ROLE_SOCIO and !ROLE_ADMIN}" />

   </h:body>
  </f:view>
</html>